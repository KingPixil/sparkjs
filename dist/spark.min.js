/*
* Spark v0.0.1
* Copyright 2016, Kabir Shah
* https://github.com/KingPixil//
* Free to use under the MIT license.
* https://kingpixil.github.io/license
*/
function classifier(){this.data={},this.total=0,this.vocab=[],this.frequency={},this.confidence=0}function generator(t){this.sentence=[],this.map={},this.starters=[],this.opts=t||{min:2,max:5}}var Spark={generator:generator,classifier:classifier};"undefined"==typeof window&&(module.exports=Spark),classifier.prototype.train=function(t,e){var r=t.split(/[\s]/gi);this.data[e]?(this.data[e].words.push.apply(this.data[e].words,r),this.data[e].total++):this.data[e]={words:r,frequency:{},total:1},this.total+=r.length},classifier.prototype.seed=function(){for(var t in this.data){var e=this.data[t];e.prior=e.words.length/this.total;for(var r in e.words)e.frequency[e.words[r]]?e.frequency[e.words[r]]++:e.frequency[e.words[r]]=1,this.vocab.indexOf(e.words[r])===-1&&this.vocab.push(e.words[r]),this.frequency[e.words[r]]?this.frequency[e.words[r]]++:this.frequency[e.words[r]]=1;var s=e.words.filter(function(t,r){return e.words.indexOf(t)==r});e.words=s}},classifier.prototype.classify=function(t){var e=null,r=0,s=0,i=t.split(/[\s]/gi);this.seed();for(var n=0;n<i.length;n++){var a=i[n];for(var o in this.data)r+=this.data[o].frequency[a]?this.data[o].frequency[a]/this.data[o].total*this.data[o].prior/(this.frequency[a]/this.total):1-this.data[o].prior,r>s&&(s=r,r=0,e=o)}return e},generator.prototype.seed=function(t){for(var e=0;e<t.length;e++){var r=this.toWords(t[e]);this.starters.push(r[0]);for(var s=0;s<r.length;s++)this.map.hasOwnProperty(r[s])?this.map[r[s]].push(r[s+1]):this.map[r[s]]=[r[s+1]]}},generator.prototype.randomElement=function(t){return t[Math.floor(Math.random()*t.length)]},generator.prototype.toWords=function(t){return t.split(" ")},generator.prototype.clear=function(){this.sentence=[],this.map={},this.starters=[]},generator.prototype.train=function(t){this.seed(t)},generator.prototype.generate=function(){var t=this.randomElement(this.starters);for(this.sentence.push(t);this.map.hasOwnProperty(t);){var e=this.sentence[this.sentence.length-1];if(t=this.randomElement(this.map[e]),this.sentence.push(t),this.sentence.length>this.opts.min&&this.sentence.length<this.opts.max&&this.map[e]===[null])break}var r=this.sentence.join(" ");return this.clear(),r};