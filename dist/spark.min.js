/*
* Spark v0.1.2
* Copyright 2016, Kabir Shah
* https://github.com/KingPixil//
* Free to use under the MIT license.
* https://kingpixil.github.io/license
*/
function Classifier(t){this.opts=t||{},this.vocab={},this.totalVocab={},this.documents={},this.totalDocs=0,this.train=function(t,s){var o=t.split(" ");this.totalDocs++,this.vocab[s]||(this.vocab[s]={}),this.documents[s]?this.documents[s]++:this.documents[s]=1,this.totalVocab[s]||(this.totalVocab[s]=0);for(var e=0;e<o.length;e++){var i=o[e];this.totalVocab[s]++,void 0===this.vocab[s][i]?this.vocab[s][i]=1:this.vocab[s][i]++}},this.getPriorProb=function(t,s){return t/s},this.max=function(t){return Object.keys(t).reduce(function(s,o){return t[s]>t[o]?s:o})},this.toObj=function(t){for(var s={},o=0;o<t.length;o++)s[t[o]]?s[t[o]]++:s[t[o]]=1;return s},this.getState=function(){return{vocab:this.vocab,totalVocab:this.totalVocab,documents:this.totalDocuments,totalDocs:this.totalDocs}},this.classify=function(t){var s={},o=this.toObj(t.split(" "));for(var e in this.vocab){var i=this.getPriorProb(this.documents[e],this.totalDocs);s[e]=i;for(var n in this.vocab[e])o[n]?s[e]*=(this.vocab[e][n]+1)/(this.documents[e]+this.totalVocab[e]):s[e]*=1-(this.vocab[e][n]+1)/(this.documents[e]+this.totalVocab[e]);s[e]=s[e]/i+(1-s[e])*(1-i)}var r=this.max(s);return this.opts.verbose?{confidence:s,choice:r}:r}}function generator(t){this.sentence=[],this.map={},this.starters=[],this.opts=t||{min:2,max:5}}var Spark={generator:generator,classifier:classifier};"undefined"==typeof window&&(module.exports=Spark),generator.prototype.seed=function(t){for(var s=0;s<t.length;s++){var o=this.toWords(t[s]);this.starters.push(o[0]);for(var e=0;e<o.length;e++)this.map.hasOwnProperty(o[e])?this.map[o[e]].push(o[e+1]):this.map[o[e]]=[o[e+1]]}},generator.prototype.randomElement=function(t){return t[Math.floor(Math.random()*t.length)]},generator.prototype.toWords=function(t){return t.split(" ")},generator.prototype.clear=function(){this.sentence=[]},generator.prototype.train=function(t){this.seed(t)},generator.prototype.generate=function(){var t=this.randomElement(this.starters);for(this.sentence.push(t);this.map.hasOwnProperty(t);){var s=this.sentence[this.sentence.length-1];if(t=this.randomElement(this.map[s]),this.sentence.push(t),this.sentence.length>this.opts.min&&this.sentence.length<this.opts.max&&this.map[s]===[null])break}var o=this.sentence.join(" ");return this.clear(),o};